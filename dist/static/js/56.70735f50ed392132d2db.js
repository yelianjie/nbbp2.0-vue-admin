webpackJsonp([56],{ZBrw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),o=i.n(a),l=i("xJrl"),n={name:"bptime",data:function(){var e=/^\d+(?=\.{0,1}\d+$|$)/,t=function(t,i,a){if(!i)return a(new Error("请输入"+t.label));e.test(i)?a():a(new Error("请输入正数"))};return{loading:!0,tableLoading:!1,dialogTitle:"添加时间",dialogFormVisible:!1,bpTimeForm:{time:"",default_price:""},bpTimeFormRules:{time:[{required:!0,validator:t,trigger:"blur",label:"霸屏时间"}],default_price:[{required:!0,validator:t,trigger:"blur",label:"价格"}]},params:{page:1,pageSize:10},tableData:[],total:0}},created:function(){this.getData()},mounted:function(){this.bpTimeFormReset=o()({},this.bpTimeForm)},methods:{getData:function(){var e=this;this.loading=!0,Object(l.g)(this.params).then(function(t){var i=t.data.result;e.tableData=i.data,e.total=i.total,e.loading=!1}).catch(function(t){e.loading=!1})},handleSizeChange:function(e){this.params.pageSize=e,this.getData()},handleCurrentChange:function(e){this.params.page=e,this.getData(),console.log("当前页: "+e)},showEmptyDiaLog:function(){this.dialogTitle="添加时间",this.dialogFormVisible=!0},handleEdit:function(e){this.bpTimeForm=o()({},e),this.dialogTitle="编辑时间",this.dialogFormVisible=!0},handleDelete:function(e,t){var i=this;this.$confirm("是否确定删除该时间?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.d)({id:e.id}).then(function(){i.$message({type:"success",message:"删除成功!"}),i.getData()}).catch(function(e){i.$message({type:"error",message:e.msg})})}).catch(function(){})},clearForm:function(){this.$refs.bpTimeForm.clearValidate(),this.$refs.bpTimeForm.resetFields(),this.bpTimeForm=this.bpTimeFormReset},_beforeAddBpTime:function(){var e=this;this.$refs.bpTimeForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var i=function(){},a="";"添加时间"==e.dialogTitle?(i=l.c,a="添加成功"):(i=l.j,a="更新成功"),i(e.bpTimeForm).then(function(t){e.$message({message:a,type:"success"}),e.clearForm(),e.dialogFormVisible=!1,e.getData()}).catch(function(t){e.$message({message:t.msg,type:"error"})})})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sub-container"},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.showEmptyDiaLog(t)}}},[e._v("添加时间")])],1)],1),e._v(" "),i("div",{staticStyle:{height:"24px"}}),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"time",label:"时间",width:"220"}}),e._v(" "),i("el-table-column",{attrs:{prop:"default_price",label:"价格",width:"350"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clearForm}},[i("el-form",{ref:"bpTimeForm",attrs:{model:e.bpTimeForm,"status-icon":"",rules:e.bpTimeFormRules,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"霸屏时间",prop:"time"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.bpTimeForm.time,callback:function(t){e.$set(e.bpTimeForm,"time",e._n(t))},expression:"bpTimeForm.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"default_price"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.bpTimeForm.default_price,callback:function(t){e.$set(e.bpTimeForm,"default_price",e._n(t))},expression:"bpTimeForm.default_price"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e._beforeAddBpTime}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},s=i("VU/8")(n,r,!1,null,null,null);t.default=s.exports}});