webpackJsonp([48],{"+M8h":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.avatar-uploader /deep/ .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader /deep/ .el-upload:hover {\n    border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n.wx-user {\n  padding: 20px 10px 0;\n  max-height: 500px;\n  overflow: auto;\n}\n.wx-user .wx-user-item {\n    margin-bottom: 10px;\n}\n.wx_avatar {\n  height: 0;\n  padding-bottom: 80%;\n}\n.wx_avatar img {\n    width: 80%;\n}\n",""])},U29n:function(e,t,a){var s=a("+M8h");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("6248e2d0",s,!0)},ZLuz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("MTGp"),i={name:"systemUser",data:function(){return{loading:!0,tableLoading:!1,dialogTitle:"添加系统用户",dialogType:"1",dialogFormVisible:!1,systemUserParam:"",systemUserForm:{sign_in_name:"",role_id:"",real_name:"",mc_id:"",id:""},systemUserFormRules:{sign_in_name:[{required:!0,trigger:"blur",message:"请输入用户名"}],role_id:[{required:!0,trigger:"blur",message:"请选择角色"}]},params:{page:1,pageSize:10},tableData:[],wxData:"",roleList:"",activeUser:"",total:0}},created:function(){this.getData(),this.getRoleList()},mounted:function(){},methods:{getWXData:function(){var e=this;if(!this.systemUserParam)return this.$message.error("请输入微信昵称"),!1;Object(s.c)({nickname:this.systemUserParam}).then(function(t){var a=t.data.result;e.wxData=a})},getRoleList:function(){var e=this;Object(s.b)().then(function(t){console.log(t),e.roleList=t.data.result})},getData:function(){var e=this;this.loading=!0,Object(s.d)(this.params).then(function(t){var a=t.data.result;e.tableData=a.data,e.total=a.total,e.loading=!1}).catch(function(t){e.loading=!1})},handleSave:function(){var e=this,t=void 0,a=void 0;this.systemUserForm.id?(t=s.j,a="编辑成功"):(t=s.a,a="添加成功"),t(this.systemUserForm).then(function(t){if(console.log(t),"301000"!=t.data.code)return e.$message.error({type:"error",message:t.data.result});e.$message({type:"success",message:a}),e.dialogFormVisible=!1,e.clearForm(),e.params.page=1,e.getData()})},clearForm:function(){this.systemUserParam="",this.wxData="",this.activeUser="",this.systemUserForm={role_id:"",real_name:"",mc_id:"",id:""}},handleSizeChange:function(e){this.params.pageSize=e,this.getData()},handleCurrentChange:function(e){this.params.page=e,this.getData(),console.log("当前页: "+e)},showEmptyDiaLog:function(){this.dialogTitle="添加系统用户",this.dialogType="1",this.dialogFormVisible=!0},handleAdd:function(e){this.dialogTitle="添加系统用户",this.dialogType="2",this.dialogFormVisible=!0,this.activeUser=e,this.systemUserForm.mc_id=this.activeUser.id},handleEdit:function(e){var t=this;this.dialogTitle="编辑系统用户",this.dialogType="2",this.dialogFormVisible=!0,this.activeUser=e,Object(s.e)({sys_user_id:e.id}).then(function(a){var s=a.data.result;t.systemUserForm={id:e.id,mc_id:s.info.bind_mc_id,real_name:s.info.real_name,sign_in_name:s.info.sign_in_name,role_id:s.info.role_id},console.log(s),console.log(t.adminManagerForm)})},handleDelete:function(e,t){var a=this;this.$confirm("是否确定删除该系统用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.g)({id:e.id,status:-2}).then(function(e){if("301000"!=e.data.code)return a.$message.error({type:"error",message:e.data.result});a.$message({type:"success",message:"删除成功!"}),a.getData()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleDisable:function(e,t){var a=this,i=void 0;i=0==e.status?-1:0,Object(s.g)({id:e.id,status:i}).then(function(e){if("301000"!=e.data.code)return a.$message.error({type:"error",message:e.data.result});a.$message({type:"success",message:"操作成功!"}),a.getData()})},DeleteTime:function(){}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.showEmptyDiaLog(t)}}},[e._v("添加用户")])],1)],1),e._v(" "),a("div",{staticStyle:{height:"24px"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"sign_in_name",label:"用户名",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"头像",width:""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"avatar",attrs:{src:e.row.headimgurl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"角色",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_name",label:"真实姓名",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{size:"mini",type:"success"}},[e._v("使用中")]):e._e(),e._v(" "),-1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDelete(t.row,t.$index)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDisable(t.row,t.$index)}}},[0==t.row.status?[e._v("禁用")]:[e._v("取消禁用")]],2)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clearForm}},["1"===e.dialogType?a("div",[a("el-row",{attrs:{gutter:24,type:"flex"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入关注牛霸霸屏的微信昵称",clearable:""},model:{value:e.systemUserParam,callback:function(t){e.systemUserParam=t},expression:"systemUserParam"}})],1),e._v(" "),a("el-col",{attrs:{span:2}}),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.getWXData}},[e._v("搜索")])],1)],1),e._v(" "),a("el-row",{staticClass:"wx-user",attrs:{gutter:24}},["string"!=typeof e.wxData&&0==e.wxData.length?a("p",{staticClass:"text-center"},[e._v("暂无数据")]):e._e(),e._v(" "),e._l(e.wxData,function(t,s){return a("el-col",{key:s,staticClass:"text-center wx-user-item",attrs:{sm:12,md:6,lg:4}},[a("div",{staticClass:"wx_avatar"},[a("img",{attrs:{src:t.headimgurl}})]),e._v(" "),a("p",{staticClass:"fs13",staticStyle:{margin:"8px 0"}},[e._v(e._s(t.nickname))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleAdd(t)}}},[e._v("添加")])],1)})],2)],1):e._e(),e._v(" "),"2"===e.dialogType?a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"text-center",attrs:{span:4}},[a("div",{staticClass:"wx_avatar"},[a("img",{attrs:{src:e.activeUser.headimgurl}})]),e._v(" "),a("p",{staticClass:"fs13",staticStyle:{margin:"8px 0"}},[e._v(e._s(e.activeUser.nickname))])]),e._v(" "),a("el-col",{attrs:{span:2}}),e._v(" "),a("el-col",{attrs:{span:18}},[a("p",{staticStyle:{"margin-top":"0"}},[e._v("说明："),a("br"),e._v("1、可微信扫码登录平台端。"),a("br"),e._v("2、用户名作为账号密码登录的用户名")])])],1),e._v(" "),a("el-form",{ref:"systemUserForm",attrs:{model:e.systemUserForm,rules:e.systemUserFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"sign_in_name"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{maxlength:"6",placeholder:"请输入用户名",disabled:""!=this.systemUserForm.id},model:{value:e.systemUserForm.sign_in_name,callback:function(t){e.$set(e.systemUserForm,"sign_in_name",t)},expression:"systemUserForm.sign_in_name"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"20px","font-size":"14px"}},[e._v('不可修改，初始登录密码为"12345678"。(建议输入中文,不超过4个字)')])],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"real_name"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{maxlength:"6",placeholder:"请输入真实姓名"},model:{value:e.systemUserForm.real_name,callback:function(t){e.$set(e.systemUserForm,"real_name",t)},expression:"systemUserForm.real_name"}}),e._v(" "),a("span")],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.systemUserForm.role_id,callback:function(t){e.$set(e.systemUserForm,"role_id",t)},expression:"systemUserForm.role_id"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1):e._e()])],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(e){a("U29n")},null,null);t.default=r.exports}});