webpackJsonp([56],{"ErM+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("RRo+"),l=i.n(o),a={name:"bpgift",data:function(){return{loading:!0,tableLoading:!1,dialogTitle:"添加礼物",dialogFormVisible:!1,bpGiftForm:{title:"",img:"",type:"",price:"",zipurl:""},bpGiftFormRules:{title:[{required:!0,trigger:"blur",message:"请输入主题名称"},{max:5,trigger:"blur",message:"主题名称不能超过5个字符"}],img:[{required:!0,trigger:"blur",message:"请上传图片"}],price:[{required:!0,validator:function(e,t,i){if(!t)return i(new Error("请输入"+e.label));l()(t)?i():i(new Error("请输入整数"))},trigger:"blur",label:"价格"}],zipurl:[{required:!0,trigger:"blur",message:"请上传文件包"}]},tableData:[{title:"玫瑰花",img:"",type:1,price:100},{title:"戒指",img:"",type:1,price:200}]}},mounted:function(){var e=this;console.log("init bpgift"),setTimeout(function(){e.loading=!1},2e3)},methods:{clearForm:function(){this.$refs.bpGiftForm.clearValidate(),this.$refs.bpGiftForm.resetFields()},pageChange:function(e){},showEmptyDiaLog:function(){this.dialogTitle="添加礼物",this.dialogFormVisible=!0},handleEdit:function(){this.dialogTitle="编辑礼物",this.dialogFormVisible=!0},handleDelete:function(e,t){var i=this;this.$confirm("是否确定删除该礼物?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$message({type:"success",message:"删除成功!"})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},DeleteTime:function(){},_beforeAddBpTime:function(){this.$refs.bpGiftForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("valid")})},handleIconSuccess:function(e,t){this.bpGiftForm.img=URL.createObjectURL(t.raw)},beforeIconUpload:function(e){var t=e.size/1024<100;return t||this.$message.error("上传图片大小不能超过 50K!"),t},beforeZipUpload:function(e){var t="application/x-zip-compressed"===e.type;return t||(this.$message.error("文件包只能是Zip格式！"),!1)},handleExceedZip:function(e,t){console.log("exceed"),this.$message.error("请先删除原有的文件包再上传！")},beforeRemoveZip:function(e,t){return this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},handleRemoveZip:function(e,t){console.log(e)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sub-container"},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.showEmptyDiaLog(t)}}},[e._v("添加礼物")])],1)],1),e._v(" "),i("div",{staticStyle:{height:"24px"}}),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"title",label:"礼物名称",width:"220"}}),e._v(" "),i("el-table-column",{attrs:{prop:"img",label:"图片",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"price",label:"价格",width:"160"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:100},on:{"current-change":e.pageChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clearForm}},[i("el-form",{ref:"bpGiftForm",attrs:{model:e.bpGiftForm,"status-icon":"",rules:e.bpGiftFormRules,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"礼物名称",prop:"title"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.bpGiftForm.title,callback:function(t){e.$set(e.bpGiftForm,"title",t)},expression:"bpGiftForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"图片",prop:"img"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/*",action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleIconSuccess,"before-upload":e.beforeIconUpload}},[e.bpGiftForm.img?i("img",{staticClass:"avatar",attrs:{src:e.bpGiftForm.img}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"price"}},[i("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.bpGiftForm.price,callback:function(t){e.$set(e.bpGiftForm,"price",e._n(t))},expression:"bpGiftForm.price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文件包",prop:"zipurl"}},[i("el-upload",{ref:"zipUpload",staticClass:"upload-demo",attrs:{"before-upload":e.beforeZipUpload,drag:"",limit:1,"before-remove":e.beforeRemoveZip,"on-remove":e.handleRemoveZip,"on-exceed":e.handleExceedZip,action:"https://jsonplaceholder.typicode.com/posts/"}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将ZIP文件拖到此处，或"),i("em",[e._v("点击上传")])])])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e._beforeAddBpTime}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},n=i("VU/8")(a,r,!1,null,null,null);t.default=n.exports}});